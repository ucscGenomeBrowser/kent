<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=iso-8859-1">
        <META name="description" content="UCSC Genome Browser FAQ">
        <META name="keywords" content="genome, genome browser, genome assembly, UCSC, bioinformatics, sequence, gene prediction, SNP, EST, mRNA">
	<TITLE>UCSC Genome Bioinformatics: FAQ</TITLE>
	<LINK REL="STYLESHEET" HREF="../style/HGStyle.css">
</HEAD>
<BODY BGCOLOR="FFF9D2" LINK="0000CC" VLINK="#330066" ALINK="#330066">
<A NAME="TOP"></A>

<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 WIDTH="100%"><TR><TH COLSPAN=2 ALIGN="left"><IMG SRC="../images/title.jpg" ALT="UCSC Genome Bioinformatics"></TH></TR>

<TR><TD COLSPAN=2 HEIGHT=40><!--#include virtual="../cgi-bin/hgMenubar"--></TD></TR>
<!--Content Tables------------------------------------------------------->
<TR><TD COLSPAN=2 CELLPADDING=10>
    <!--outer table is for border purposes-->
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1"><TR><TD>
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0"><TR><TD>
            <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
                <TR><TD> <FONT SIZE="4"><b>&nbsp;   Frequently Asked Questions: Blat</b></FONT>
                </TD></TR></TABLE>
            <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0><TR><TH HEIGHT=10></TH></TR>
                <TR><TD>&nbsp;</TD><TD>
		<UL>
                <LI><A HREF="#blat1">Blat vs. Blast</A>
                <LI><A HREF="#blat1b">Blat cannot find a sequence</A>
                <LI><A HREF="#blat2">Blat use restrictions</A>
                <LI><A HREF="#blat3">Downloading Blat source and documentation</A>
                <LI><A HREF="#blat5">Replicating web-based Blat parameters in command-line version</A>
                <LI><A HREF="#blat6">Using the <em>-ooc</em> flag</A>
                <LI><A HREF="#blat4">Replicating web-based Blat percent identity and score calculations</A>
                <LI><A HREF="#blat7">Replicating web-based Blat &quot;I'm feeling lucky&quot; search results</A> 
                <LI><A HREF="#blat8">Using Blat for short sequences with maximum sensitivity</A> 
		</UL>
		<P>
		<A HREF="index.html">Return to FAQ Table of Contents</A>
		<BR>
            </TD><TD WIDTH=15></TD></TR></TABLE><BR>
        </TD></TR></TABLE>
    </TD></TR></TABLE>
<BR>

<!--Content Table------------------------------------------------------------>
<A NAME="blat1"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Blat vs. Blast</b></FONT></TD> 
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"What are the differences between Blat and Blast?"
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			Blat is an alignment tool like BLAST, but it is structured differently.  On 
			DNA, Blat works by keeping an index of an entire genome in memory. 
			Thus, the target database of BLAT is not a set of GenBank sequences, but
                        instead an index derived from the assembly of the entire genome. By default,
                        the index consists of all non-overlapping 11-mers except for those heavily
                        involved in repeats, and it uses less than a gigabyte of RAM. This smaller
                        size means that Blat is far more easily <a href="../admin/mirror.html">mirrored</a>
                        than BLAST. Blat of DNA is designed to quickly find sequences of 95% and
                        greater similarity of length 40 bases or more. It may miss more divergent or
                        shorter sequence alignments. (The default settings and expected behavior of
                        standalone Blat are slightly different from those on the
                        <a href="../cgi-bin/hgBlat">graphical version of Blat</a>.)
			<P>
			On proteins, Blat uses 4-mers rather than 11-mers, finding protein sequences 
			of 80% and greater similarity to the query of length 20+ amino acids. The
                        protein index requires slightly more than 2 gigabytes of RAM. 
			In practice -- due to sequence divergence rates over evolutionary time -- DNA
			Blat works well within humans and primates, while protein Blat 
			continues to find good matches within terrestrial vertebrates and even earlier 
			organisms for conserved proteins. Within humans, protein Blat gives a much better 
			picture of gene families (paralogs) than DNA Blat. However, BLAST and 
			psi-BLAST at NCBI can find much more remote matches.
			<P>
			From a practical standpoint, Blat has several advantages over BLAST: 
			<UL>
			<LI>speed (no queues, response in seconds) at the price of lesser homology depth
			<LI>the ability to submit a long list of simultaneous queries in fasta format
			<LI>five convenient output sort options
			<LI>a direct link into the UCSC browser
			<LI>alignment block details in natural genomic order
			<LI>an option to launch the alignment later as part of a custom track
			</UL>
			Blat is commonly used to look up the location of a 
			sequence in the genome or determine the exon structure of an mRNA, but expert 
			users can run large batch jobs and make internal parameter sensitivity 
			changes by installing command line Blat on their own Linux server.
		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>
<BR>

<!--Content Table------------------------------------------------------------>
<A NAME="blat1b"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Blat cannot find a sequence</b></FONT></TD>
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"I cannot find a sequence with Blat although I'm sure
                        it is in the genome. Am I doing something wrong?"
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			<P>
                        You may first check if you are using the correct version
                        of the genome. For example, two versions of the human genome
                        are currently in use (called hg19 and hg38) and your
                        sequence may be only in one of them. Many 
                        published articles do not specify the version so trying
                        a few may be necessary.<P>

                        <P>
                        Very short sequences that go over a splice site in a
                        cDNA sequence can not be found, as they are not
                        in the genome, QPCR primers are a typical example.
                        You can use <A HREF="../cgi-bin/hgPcr">In-Silico PCR</A> and select a gene set as the
                        target for these cases. In general, In-Silico PCR
                        is more sensitive and should be preferred for pairs of primers.
                        </P>
                        
                        <P>
                        If you are sure that the genome is the
                        right one and
                        that the sequence is indeed there, for example by using
                        the "Short match" track, the problem
                        may be a result of Blat's query masking. The online
                        version of Blat masks 11mers from the query that occur
                        more than 1024 times in the genome. The goal is to
                        improve speed but this may result in missing hits when
                        you are searching for sequences in repeats.</P>

                        To find these matches with the online version of Blat,
                        you can add more flanking sequence to your query. If
                        this is not possible, the only alternative is to
                        download the executables of Blat and the .2bit file of
                        a genome to your own machine and use the command line.
                        See <A HREF="#blat3">Downloading Blat source and
                        documentation</A>.

		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>
<BR>

<!--Content Table------------------------------------------------------------>
<A NAME="blat2"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Blat use restrictions</b></FONT></TD>
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"I received a high-volume traffic warning from your Blat
			server informing me that I had exceeded the server use
			limitations. Can you give me information on the UCSC
			Blat server use parameters?"
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			Due to the high demand on our Blat servers, we restrict 
			service for users who programatically query Blat or do 
			large batch queries. Program-driven use of Blat is 
			limited to a maximum of one hit every 15 
			seconds and no more than 5,000 hits per day. Please limit 
			batch queries to 25 sequences or less. 
			<P>
			For users with high-volume Blat demands, we recommend
			downloading Blat for local use. For more information, 
			see <A HREF="#blat3">Downloading Blat source and 
			documentation</A>.
		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>
<BR>

<!--Content Table------------------------------------------------------------>
<A NAME="blat3"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Downloading Blat source and documentation</b></FONT></TD>
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"Is the Blat source available for download? Is there
			documentation available?"
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			Blat source and executables are freely available for
			academic, nonprofit and personal use. Commercial licensing
			information is available on the 
			<A HREF="http://www.kentinformatics.com" 
			TARGET=_blank>Kent Informatics website</A>.
			<P>
			Blat source may be downloaded from 
			<A HREF="http://www.soe.ucsc.edu/~kent/src">http://www.soe.ucsc.edu/~kent</A> 
			(look for the blatSrc* zip file with the most recent 
			date). For 
			Blat executables, go to 
			<A HREF="http://hgdownload.cse.ucsc.edu/admin/exe/">http://hgdownload.cse.ucsc.edu/admin/exe/</A>; and choose your machine type. 
			<P>
			Documentation on Blat program specifications is available
			<A HREF="../goldenPath/help/blatSpec.html">here</A>.
		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>
<BR>

<!--Content Table------------------------------------------------------------>
<A NAME="blat5"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Replicating web-based Blat 
			parameters in command-line version</A>
</b></FONT></TD>
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"I'm setting up my own Blat server and would like to use 
			the same parameter values that the UCSC web-based Blat 
			server uses."
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			
			We almost always expect there to be some small differences
			between the hgBlat/gfServer and the stand-alone command-line blat. 
			The best matches can be found using pslReps and
			pslCDnaFilter utilities. The web-based blat is tuned permissively 
			with a minimum cut-off score of 20, which will display most of the 
			alignments. Other than to confirm that your command-line blat is 
			working, there is little use in perfectly replicating the web-based blat results.
			We advise deciding which filtering parameters make the most sense for 
			the experiment or analysis. Often these settings will 
			be different and more stringent than those of the web-based blat.
			With that in mind, use the following settings to replicate the search results of the web-based blat:
			<P>
			<em>faToTwoBit</em>: 
			<UL>
			<LI>Use soft masking.
			</UL>
			<P>
			<em>gfServer</em> (<B>this is how the UCSC web-based blat servers are configured</B>):</BR>
			<UL>
			<LI>blat server (capable of PCR):</BR>
    			&nbsp;&nbsp;&nbsp;<TT>gfServer start blatMachine portX -stepSize=5 -log=untrans.log database.2bit</TT>
			<LI>translated blat server:<BR>
    			&nbsp;&nbsp;&nbsp;<TT>gfServer start blatMachine portY -trans -mask -log=trans.log database.2bit</TT>
			</UL>
			For enabling DNA/DNA and DNA/RNA
			matches, only the host, port and twoBit files are needed.
			The same port is used for both untranslated blat (gfClient)
			and PCR (webPcr). You'll need a separate blat server on a separate
			port to enable translated blat (protein searches or translated searches in protein-space). 
			</P>
			<P>
			<em>gfClient</em>: 
			<UL>
			<LI>Set <em>-minScore=0</em> and 
			<em>-minIdentity=0</em>. This will result in some 
			low-scoring, generally spurious hits, but for 
			interactive use it's sufficiently easy to ignore them 
			(because results are sorted by score) and sometimes 
			the low-scoring hits come in handy. 
			</UL></P>
			<P>
			<em>standalone blat</em>: 
			<UL>
			<LI>blat search:<BR>
			&nbsp;&nbsp;&nbsp;<TT>blat -stepSize=5 -repMatch=2253 -minScore=0 -minIdentity=0 database.2bit query.fa output.psl </TT><br>
			</UL></P>
			<br>Notes on repMatch: 
			<br>The default setting for gfServer dna matches is: repMatch = 1024 * (tileSize/stepSize).
			<br>The default setting for blat dna matches is: repMatch = 1024 (if tileSize=11).
			<br>To get command-line results that are equivalent to web-based results, repMatch must
			    be specified when using blat.
			<P>
			For more information about how to replicate the score and percent identity matches displayed 
			by our web-based blat, please see the following <A HREF="../FAQ/FAQblat.html#blat4">
			blat FAQ</A>.
			<P>
			For more information on the parameters available for
			blat, gfServer, and gfClient, see the 
			<A HREF="../goldenPath/help/blatSpec.html">blat
			specifications</A>.
			<P>
			
		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>
<BR>


<!--Content Table------------------------------------------------------------>
<A NAME="blat6"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Using the <em>-ooc</em> flag</b></FONT></TD> 
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"What does the <em>-ooc</em> flag do?"
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			Using any <em>-ooc</em> option in blat, such
			as <em>-ooc=11.ooc</em>, simply serves to speed up 
			searches similar to repeat-masking sequence. The
			<em>11.ooc</em> file contains sequences 
			determined to be over-represented in the genome 
			sequence. To speed up searches, these sequences are not 
			used when seeding an alignment against the genome. For 
		 	reasonably-sized sequences, this will not create a 
			problem and will significantly reduce processing time.
			<P>
			By not using the <em>11.ooc</em> file, you will increase 
			alignment time, but will also slightly increase 
			sensitivity. This may be important if you are aligning 
			shorter sequences or sequences of poor quality. For example,
			if a particular sequence consists primarily of 
			sequences in the <em>11.ooc</em> file, it will 
			never be seeded correctly for an alignment if the 
			<em>-ooc</em> flag is used.  
			<P>
			In summary,
			if you are not finding certain sequences and can afford 
			the extra processing time, you may want to run blat 
			without the <em>11.ooc</em> file if your particular
			situation warrants its use.
		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>
    <BR>

<!--Content Table------------------------------------------------------------>
<A NAME="blat4"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Replicating web-based Blat percent identity and score calculations</b></FONT></TD> 
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"Using my own command-line Blat server, how can I 
			replicate the percent identity and score calculations
			produced by web-based Blat?"
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			There is no option to command-line Blat that gives 
			you the percent ID and the score. However, we have
			created scripts that include the calculations.
			<UL>
			 <LI>View the perl script from the source tree:
			 <a
			 href="http://genome-source.cse.ucsc.edu/gitweb/?p=kent.git;a=blob_plain;f=src/utils/pslScore/pslScore.pl"><TT>pslScore.pl</TT></a>
			 <LI>View the corresponding C program:
			 <a
			 href="http://genome-source.cse.ucsc.edu/gitweb/?p=kent.git;a=blob_plain;f=src/utils/pslScore/pslScore.c"><TT>pslScore.c</TT></a>
			 and associated library functions <TT>pslScore</TT>
			 and <TT>pslCalcMilliBad</TT> in   
                         <a
                         href="http://genome-source.cse.ucsc.edu/gitweb/?p=kent.git;a=blob_plain;f=src/lib/psl.c"><tt>psl.c</tt></a>
			</UL>
			See our <a href="FAQlicense.html">FAQ</a> on source code 
			licensing and downloads for information on obtaining
			the source.
		        </p>
		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>
    <BR>

<!--Content Table------------------------------------------------------------>
<A NAME="blat7"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Replicating web-based Blat &quot;I'm feeling lucky&quot; search results</b></FONT></TD>
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"How do I generate the same search results as web-based
			Blat's &quot;I'm feeling lucky&quot; option using 
			command-line blat?"
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			The code for the &quot;I'm feeling lucky&quot; Blat
			search orders the results based on the sort output 
			option that you selected on the query page. It then 
			returns the highest-scoring alignment of the first 
			query sequence. 
			<P>
			If you are sorting results by &quot;query, start&quot; 
			or &quot;chrom, start&quot;, generating the &quot;I'm
			feeling lucky&quot; result is straightforward:
			sort the output file by these columns, then select the 
			top result. 
			<P>
			To replicate any of the sort options involving score, 
			you first must calculate the score for each result in 
			your PSL output file, then sort the results by score or 
			other combination (<em>e.g.</em> &quot;query, 
			score&quot; and &quot;chrom, score&quot;).
			See the section on <A HREF="#blat4">Replicating 
			web-based Blat percent identity and score 
			calculations</A> for information on calculating the
			score.
			<P>
			Alternatively, you can try filtering your Blat PSL 
			output using either the <TT>pslReps</TT> or 
			<TT>pslCDnaFilter</TT> program available in the Genome
			Browser source code. For information on obtaining the
			source code, see our <A HREF="FAQlicense.html">FAQ</A> 
			on source code licensing and downloads. 
		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>

    <BR>

<!--Content Table------------------------------------------------------------>
<A NAME="blat8"></A>
    <!--outer table is for border purposes-->        
    <TABLE WIDTH="100%" BGCOLOR="#888888" BORDER="0" CELLSPACING="0" CELLPADDING="1">
        <TR><TD>            
        <TABLE BGCOLOR="fffee8" WIDTH="100%"  BORDER="0" CELLSPACING="0" CELLPADDING="0">
	    <TR><TD>                
  	    <TABLE BGCOLOR="D9E4F8" BACKGROUND="../images/hr.gif" WIDTH=100%>
	        <TR><TD>                
	        <!--cheap trick to get background on row to be continuous-->
	   	<TABLE CELLPADDING=0 CELLSPACING=0 MARGIN=0 WIDTH="100%">
		    <TR><TD ALIGN="left">
	   	    <FONT SIZE="4"><b>&nbsp; Using Blat for short sequences with maximum sensitivity </b></FONT></TD>
		    <TD ALIGN="right"><A HREF="#TOP"><IMG SRC="../images/index.gif" ALT="" ALIGN="right" BORDER=0></A>
	            </TD></TR>
  	        </TABLE>                
	        </TD></TR>
  	    </TABLE>                
   	    <TABLE BGCOLOR="fffee8" WIDTH="100%" CELLPADDING=0>
	        <TR><TH HEIGHT=10></TH></TR>
                <TR><TD WIDTH=10>&nbsp;</TD>
		    <TD>
	            <P>
			<B><FONT COLOR="#006666">Question: </FONT></B><BR>
			"How do I configure blat for short sequences with 
		   	 maximum sensitivity?"
			<P>
			<B><FONT COLOR="#006666">Response:</FONT></B><BR> 
			Here are some guidelines for configuring standalone 
			blat and gfServer/gfClient for these conditions:</P>
		    	<P>
			<UL>
			<LI>
			The formula to find the shortest query size that will
			guarantee a match (if matching tiles are not marked as
			overused) is: 2 * <em>stepSize</em> + <em>tileSize</em> - 1<br>
			For example, with <em>stepSize</em> set to 5 and
			<em>tileSize</em> set to 11, matches of query size
                        2 * 5 + 11 - 1 = 20 bp will be found if the query matches the target exactly.<br>
                        The <em>stepSize</em> parameter can range from 1 to <em>tileSize</em>.<br>
                        The <em>tileSize</em> parameter can range from 6 to 15. For protein, the
                        range starts lower.<br>
			For <em>minMatch</em>=1 (e.g., protein), the minimum guaranteed match length is:
                        1 * <em>stepSize</em> + <em>tileSize</em> - 1<br>
			Note: There is also a &quot;minimum lucky size&quot; for hits. This is the
			smallest possible hit that BLAT can find. This minimum lucky size can be
			calculated using the formula:
			<i>stepSize</i> + <i>tileSize</i>. For example, if we use a <i>tileSize</i>
			of 11 and <i>stepSize</i> of 5, hits smaller than 16 bases won't be reported.
			<LI>
		 	Try using <em>-fine</em>.
			<LI>
			Use a large value for <em>repMatch</em> (e.g. 
			<em>-repMatch</em> = 1000000) 
			to reduce the chance of a tile being marked as 
			over-used.
			<LI>
			Do not use an <em>.ooc</em> file.
			<LI>
		 	Do not use <em>-fastMap</em>.
                        <LI>
			Do not use masking command-line options.
			</UL>
			<P>
			The above changes will make BLAT more sensitive, but 
			will also slow the speed and increase the memory usage. 
			It may be necessary to process one chromosome
			at a time to reduce the memory requirements. 
			<P>
			A note on filtering output: increasing the
			<em>-minScore</em> parameter value beyond one-half of
			the query size has no further effect.  Therefore, use
			either the <TT>pslReps</TT> or <TT>pslCDnaFilter</TT>
			program available in the Genome Browser source code to
			filter for the size, score, coverage, or quality
			desired.  For information on obtaining the
			source code, see our <A HREF="FAQlicense.html">FAQ</A> 
			on source code licensing and downloads. </P>
		    </TD><TD WIDTH=15></TD>
		</TR>
	    </TABLE>
	    <br></TD></TR>
	</TABLE>
	</TD></TR>
    </TABLE>
    </TD><TD WIDTH=15></TD></TR>


</TABLE>
</BODY></HTML>
